# å‡ºå‹¤ç®¡ç†ã‚¢ãƒ—ãƒª â€” å®Ÿè£…ä»•æ§˜æ›¸

## æ¦‚è¦
å‡ºå‹¤ãƒ»é€€å‹¤ã®æ‰“åˆ»ã¨ã€å‹¤æ€ å±¥æ­´ã®ç¢ºèªãŒã§ãã‚‹ Web ã‚¢ãƒ—ãƒªã€‚
æ‰“åˆ»ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã ã‘ã®ã‚·ãƒ³ãƒ—ãƒ«ãªæ“ä½œã§ã€å‹¤å‹™æ™‚é–“ã‚’è‡ªå‹•è¨ˆç®—ã™ã‚‹ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: TanStack Startï¼ˆãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ï¼‰
- **UI**: React + TypeScript + shadcn/ui + Tailwind CSS
- **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçŠ¶æ…‹**: zustandï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼‰
- **ã‚µãƒ¼ãƒãƒ¼ãƒ‡ãƒ¼ã‚¿å–å¾—**: TanStack Queryï¼ˆ/api ã‚’ fetchï¼‰
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: zodï¼ˆAPIå¥‘ç´„ã®å‹ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å…¼ã­ã‚‹ï¼‰
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Cloudflare Pages
- **å°†æ¥ã®DB**: Turso (libSQL) + Drizzle ORM

## è¨­è¨ˆæ–¹é‡

### ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆfeatures å†…ï¼‰
- domain/ ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å®Œå…¨éä¾å­˜ï¼ˆç´”ç²‹ãªå‹ã¨é–¢æ•°ã®ã¿ï¼‰
- application/ ã‚‚ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯éä¾å­˜ï¼ˆãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã®ã¿ï¼‰
- infrastructure/ ãŒå¤–éƒ¨ä¾å­˜ï¼ˆã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªãƒ‡ãƒ¼ã‚¿ã€å°†æ¥ã®DBæ¥ç¶šï¼‰ã‚’æ‹…å½“
- presentation/ ãŒ React UI

### HTTP API ä¸­å¿ƒè¨­è¨ˆï¼ˆå°†æ¥ã®åˆ†é›¢ã«å‚™ãˆã‚‹ï¼‰
- **UIã¯ createServerFn ã‚’ç›´æ¥å‘¼ã°ãªã„**
- UIã¯ TanStack Query ã§ `/api/attendance/*` ã‚’å©ãã ã‘ã«ã™ã‚‹
- TanStack Start ã® Server Routes ã§ `/api/attendance/*` ã‚’æä¾›
- å°†æ¥ Hono ã«ç§»ã™ã¨ãã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ baseUrl ã‚’å¤‰ãˆã‚‹ã ã‘ã§æ¸ˆã‚€

### æ™‚åˆ»ç®¡ç†
- ç¾åœ¨æ™‚åˆ»ã¯ã‚µãƒ¼ãƒãƒ¼å´ã§å–å¾—ã™ã‚‹ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ™‚åˆ»ã‚’ä¿¡ç”¨ã—ãªã„ï¼‰
- Clock ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æ™‚åˆ»å–å¾—ã‚’æŠ½è±¡åŒ–ã—ã€ãƒ†ã‚¹ãƒˆæ™‚ã«ãƒ¢ãƒƒã‚¯å¯èƒ½ã«ã™ã‚‹
- ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¯ Asia/Tokyo å›ºå®š

### ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã®æ®µéšçš„ç§»è¡Œ
- åˆæœŸ: ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªï¼ˆã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•ã§ãƒªã‚»ãƒƒãƒˆï¼‰
- å°†æ¥: Turso + Drizzle ORMï¼ˆrepository å®Ÿè£…ã‚’å·®ã—æ›¿ãˆã‚‹ã ã‘ï¼‰

---

## å‡ºå‹¤ç®¡ç†ã®å‹•ä½œãƒ•ãƒ­ãƒ¼

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ / ã«ã‚¢ã‚¯ã‚»ã‚¹
2. GET /api/attendance/today â†’ ä»Šæ—¥ã®å‹¤æ€ çŠ¶æ…‹ã‚’å–å¾—
3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«å¿œã˜ãŸç”»é¢ã‚’è¡¨ç¤º
   - æœªå‡ºå‹¤ â†’ å‡ºå‹¤ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
   - å‹¤å‹™ä¸­ â†’ é€€å‹¤ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºï¼ˆå‡ºå‹¤æ™‚åˆ»ã‚‚è¡¨ç¤ºï¼‰
   - é€€å‹¤æ¸ˆã¿ â†’ ãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–ï¼ˆå‡ºé€€å‹¤æ™‚åˆ» + å‹¤å‹™æ™‚é–“ã‚’è¡¨ç¤ºï¼‰
4. å‡ºå‹¤ãƒœã‚¿ãƒ³ â†’ POST /api/attendance/clock-in
5. é€€å‹¤ãƒœã‚¿ãƒ³ â†’ POST /api/attendance/clock-out
6. å±¥æ­´ã‚»ã‚¯ã‚·ãƒ§ãƒ³ â†’ GET /api/attendance/history
```

---

## API ä»•æ§˜ï¼ˆ4æœ¬ï¼‰

### GET /api/attendance/today
ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæœªå‡ºå‹¤ï¼‰:
```json
{
  "date": "2026-02-23",
  "status": "not_started",
  "clockIn": null,
  "clockOut": null,
  "workMinutes": null
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆå‹¤å‹™ä¸­ï¼‰:
```json
{
  "date": "2026-02-23",
  "status": "working",
  "clockIn": "2026-02-23T09:00:00+09:00",
  "clockOut": null,
  "workMinutes": null
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆé€€å‹¤æ¸ˆã¿ï¼‰:
```json
{
  "date": "2026-02-23",
  "status": "finished",
  "clockIn": "2026-02-23T09:00:00+09:00",
  "clockOut": "2026-02-23T18:00:00+09:00",
  "workMinutes": 540
}
```

### POST /api/attendance/clock-in
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: ãƒœãƒ‡ã‚£ãªã—

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸï¼‰:
```json
{
  "success": true,
  "clockIn": "2026-02-23T09:00:00+09:00",
  "message": "å‡ºå‹¤ã—ã¾ã—ãŸ"
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆã‚¨ãƒ©ãƒ¼: æ—¢ã«å‡ºå‹¤æ¸ˆã¿ï¼‰:
```json
{
  "success": false,
  "message": "æ—¢ã«å‡ºå‹¤æ¸ˆã¿ã§ã™"
}
```

### POST /api/attendance/clock-out
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: ãƒœãƒ‡ã‚£ãªã—

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸï¼‰:
```json
{
  "success": true,
  "clockOut": "2026-02-23T18:00:00+09:00",
  "workMinutes": 540,
  "message": "é€€å‹¤ã—ã¾ã—ãŸ"
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆã‚¨ãƒ©ãƒ¼: å‡ºå‹¤ã—ã¦ã„ãªã„ï¼‰:
```json
{
  "success": false,
  "message": "å‡ºå‹¤ã—ã¦ã„ã¾ã›ã‚“"
}
```

### GET /api/attendance/history
ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "records": [
    {
      "date": "2026-02-21",
      "status": "finished",
      "clockIn": "2026-02-21T09:15:00+09:00",
      "clockOut": "2026-02-21T18:30:00+09:00",
      "workMinutes": 555
    },
    {
      "date": "2026-02-20",
      "status": "finished",
      "clockIn": "2026-02-20T08:50:00+09:00",
      "clockOut": "2026-02-20T17:45:00+09:00",
      "workMinutes": 535
    },
    {
      "date": "2026-02-19",
      "status": "finished",
      "clockIn": "2026-02-19T09:00:00+09:00",
      "clockOut": "2026-02-19T18:00:00+09:00",
      "workMinutes": 540
    }
  ]
}
```

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
attendance-app/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ __root.tsx                              # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ index.tsx                               # å‡ºå‹¤ç®¡ç†ãƒšãƒ¼ã‚¸ï¼ˆAttendancePage ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â””â”€â”€ attendance/
â”‚   â”‚           â”œâ”€â”€ today.ts                        # GET  /api/attendance/today
â”‚   â”‚           â”œâ”€â”€ clock-in.ts                     # POST /api/attendance/clock-in
â”‚   â”‚           â”œâ”€â”€ clock-out.ts                    # POST /api/attendance/clock-out
â”‚   â”‚           â””â”€â”€ history.ts                      # GET  /api/attendance/history
â”‚   â”œâ”€â”€ router.tsx                                  # TanStack Router è¨­å®š
â”‚   â””â”€â”€ client.tsx                                  # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¨ãƒ³ãƒˆãƒª
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ ui/                                     # shadcn/ui å…±é€šéƒ¨å“
â”‚   â”‚       â”œâ”€â”€ button.tsx
â”‚   â”‚       â”œâ”€â”€ card.tsx
â”‚   â”‚       â”œâ”€â”€ badge.tsx
â”‚   â”‚       â”œâ”€â”€ table.tsx
â”‚   â”‚       â”œâ”€â”€ dialog.tsx
â”‚   â”‚       â””â”€â”€ separator.tsx
â”‚   â”‚
â”‚   â””â”€â”€ features/
â”‚       â””â”€â”€ attendance/
â”‚           â”œâ”€â”€ contracts/                          # â˜… APIå¥‘ç´„ï¼ˆzod schema + å‹ï¼‰
â”‚           â”‚   â””â”€â”€ attendance.ts                   #   å”¯ä¸€ã®çœŸå®Ÿ
â”‚           â”‚
â”‚           â”œâ”€â”€ domain/                             # â˜… ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å®Œå…¨éä¾å­˜
â”‚           â”‚   â”œâ”€â”€ entities/
â”‚           â”‚   â”‚   â””â”€â”€ attendance.ts               #   AttendanceDay, AttendanceStatus
â”‚           â”‚   â”œâ”€â”€ logic/
â”‚           â”‚   â”‚   â”œâ”€â”€ attendance.ts               #   canClockIn, canClockOut, getStatus
â”‚           â”‚   â”‚   â””â”€â”€ worktime.ts                 #   calculateWorkDuration, formatDuration
â”‚           â”‚   â””â”€â”€ ports/
â”‚           â”‚       â”œâ”€â”€ attendanceRepository.ts     #   interface AttendanceRepository
â”‚           â”‚       â””â”€â”€ clock.ts                    #   interface Clockï¼ˆç¾åœ¨æ™‚åˆ»ã®æŠ½è±¡åŒ–ï¼‰
â”‚           â”‚
â”‚           â”œâ”€â”€ application/                        # â˜… ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯éä¾å­˜
â”‚           â”‚   â””â”€â”€ services/
â”‚           â”‚       â””â”€â”€ attendanceService.ts        #   clockIn, clockOut, getToday, getHistory
â”‚           â”‚
â”‚           â”œâ”€â”€ infrastructure/                     # â˜… å¤–éƒ¨ä¾å­˜ã®å®Ÿè£…
â”‚           â”‚   â”œâ”€â”€ repositories/
â”‚           â”‚   â”‚   â”œâ”€â”€ inMemoryAttendanceRepository.ts  # ä»Š: ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªå®Ÿè£…
â”‚           â”‚   â”‚   â””â”€â”€ drizzleAttendanceRepository.ts   # å¾Œ: Turso + Drizzle å®Ÿè£…ï¼ˆç©ºãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚           â”‚   â”œâ”€â”€ clock/
â”‚           â”‚   â”‚   â””â”€â”€ systemClock.ts              #   Clock ã®å®Ÿè£…ï¼ˆå®Ÿæ™‚åˆ»ã‚’è¿”ã™ï¼‰
â”‚           â”‚   â”œâ”€â”€ getRepository.ts                #   å®Ÿè£…ã®åˆ‡ã‚Šæ›¿ãˆãƒã‚¤ãƒ³ãƒˆ
â”‚           â”‚   â”œâ”€â”€ getClock.ts                     #   Clock å®Ÿè£…ã®åˆ‡ã‚Šæ›¿ãˆãƒã‚¤ãƒ³ãƒˆ
â”‚           â”‚   â”œâ”€â”€ data/
â”‚           â”‚   â”‚   â””â”€â”€ attendanceData.ts           #   ãƒ™ã‚¿æ›¸ãåˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆéå»ã®å±¥æ­´ï¼‰
â”‚           â”‚   â””â”€â”€ db/
â”‚           â”‚       â”œâ”€â”€ client.ts                   #   å¾Œ: Turso æ¥ç¶šè¨­å®š
â”‚           â”‚       â””â”€â”€ schema.ts                   #   å¾Œ: Drizzle ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
â”‚           â”‚
â”‚           â”œâ”€â”€ presentation/                       # â˜… React UI
â”‚           â”‚   â”œâ”€â”€ hooks/
â”‚           â”‚   â”‚   â””â”€â”€ useAttendance.ts            #   zustand store + TanStack Query
â”‚           â”‚   â”œâ”€â”€ parts/
â”‚           â”‚   â”‚   â”œâ”€â”€ StatusCard.tsx              #   ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆæœªå‡ºå‹¤/å‹¤å‹™ä¸­/é€€å‹¤æ¸ˆã¿ï¼‰
â”‚           â”‚   â”‚   â”œâ”€â”€ ClockButton.tsx             #   å‡ºå‹¤/é€€å‹¤ãƒœã‚¿ãƒ³
â”‚           â”‚   â”‚   â”œâ”€â”€ WorkSummary.tsx             #   å‹¤å‹™æ™‚é–“ã‚µãƒãƒªãƒ¼
â”‚           â”‚   â”‚   â”œâ”€â”€ HistoryTable.tsx            #   å‹¤æ€ å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«
â”‚           â”‚   â”‚   â””â”€â”€ CurrentTime.tsx             #   ç¾åœ¨æ™‚åˆ»ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
â”‚           â”‚   â””â”€â”€ AttendancePage.tsx              #   ãƒšãƒ¼ã‚¸å…¨ä½“ã®çµ„ã¿ç«‹ã¦
â”‚           â”‚
â”‚           â””â”€â”€ index.ts                            # feature ã®å…¬é–‹API
â”‚
â”œâ”€â”€ app.config.ts                                   # TanStack Start è¨­å®š
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ components.json                                 # shadcn/ui è¨­å®š
â””â”€â”€ wrangler.toml                                   # Cloudflare è¨­å®šï¼ˆå¾Œã§ï¼‰
```

---

## å„ãƒ•ã‚¡ã‚¤ãƒ«ã®è²¬å‹™ã¨ä¾å­˜é–¢ä¿‚

### contracts/attendance.tsï¼ˆAPIå¥‘ç´„ï¼‰
```
ä¾å­˜: zod ã®ã¿
å½¹å‰²: ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® schema ã¨å‹ã‚’å®šç¾©
     Web / React Native / Hono API ã§å…±æœ‰ã™ã‚‹å”¯ä¸€ã®çœŸå®Ÿ
```

### domain/ï¼ˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯éä¾å­˜ï¼‰
```
ä¾å­˜: ä½•ã«ã‚‚ä¾å­˜ã—ãªã„ï¼ˆç´”ç²‹TypeScriptï¼‰
- entities/attendance.ts  â†’ å†…éƒ¨ãƒ‡ãƒ¼ã‚¿å‹ï¼ˆAttendanceDay, AttendanceStatusï¼‰
- logic/attendance.ts     â†’ canClockIn, canClockOut, getStatusï¼ˆç´”ç²‹é–¢æ•°ï¼‰
- logic/worktime.ts       â†’ calculateWorkDuration, formatDurationï¼ˆç´”ç²‹é–¢æ•°ï¼‰
- ports/attendanceRepository.ts â†’ interface AttendanceRepository
- ports/clock.ts          â†’ interface Clockï¼ˆnow(): Date ã‚’è¿”ã™ï¼‰
```

### application/services/attendanceService.tsï¼ˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯éä¾å­˜ï¼‰
```
ä¾å­˜: domain/ports, domain/logic, infrastructure/getRepository, infrastructure/getClock
å½¹å‰²: ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®å®Ÿè¡Œï¼ˆãƒªãƒã‚¸ãƒˆãƒªå–å¾— â†’ ãƒ­ã‚¸ãƒƒã‚¯é©ç”¨ â†’ çµæœè¿”å´ï¼‰
     TanStack Start ã«ã‚‚ Hono ã«ã‚‚ä¾å­˜ã—ãªã„
```

### app/routes/api/ï¼ˆTanStack Start å°‚ç”¨ â€” å°†æ¥ Hono ã«ç½®æ›ï¼‰
```
ä¾å­˜: application/services, contracts
å½¹å‰²: HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆ â†’ attendanceService å‘¼ã³å‡ºã— â†’ HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹
     è–„ã„ãƒ©ãƒƒãƒ‘ãƒ¼ã€‚åˆ†é›¢æ™‚ã« Hono routes ã«å·®ã—æ›¿ãˆã‚‹
```

### presentation/ï¼ˆReact å°‚ç”¨ï¼‰
```
ä¾å­˜: contractsï¼ˆå‹ã®ã¿ï¼‰, domain/logic/worktimeï¼ˆç´”ç²‹é–¢æ•°ã® formatDurationï¼‰
     /api/* ã‚’ TanStack Query ã§å©ã
å½¹å‰²: UIè¡¨ç¤ºã¨çŠ¶æ…‹ç®¡ç†
```

---

## å°†æ¥ã®åˆ†é›¢ã‚·ãƒŠãƒªã‚ª

```
TanStack Startï¼ˆä»Šï¼‰                 Hono + React Nativeï¼ˆå°†æ¥ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
app/routes/api/*                     â†’ Hono routes ã«ç½®æ›
app/routes/index.tsx                 â†’ å‰Šé™¤
contracts/                           â†’ ãã®ã¾ã¾å…±æœ‰ âœ…ï¼ˆnpm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ï¼‰
domain/                              â†’ ãã®ã¾ã¾å…±æœ‰ âœ…
application/                         â†’ ãã®ã¾ã¾å…±æœ‰ âœ…
infrastructure/repositories/         â†’ ãã®ã¾ã¾å…±æœ‰ âœ…ï¼ˆTursoæ¥ç¶šè¨­å®šã ã‘èª¿æ•´ï¼‰
infrastructure/getRepository.ts      â†’ Hono ã® env ã‹ã‚‰æ¥ç¶šæƒ…å ±ã‚’æ³¨å…¥ã™ã‚‹å½¢ã«èª¿æ•´
infrastructure/getClock.ts           â†’ ãã®ã¾ã¾å…±æœ‰ âœ…
presentation/                        â†’ React Native ã§ä½œã‚Šç›´ã—
```

### Turso ç§»è¡Œæ™‚ã®å¤‰æ›´ç®‡æ‰€ï¼ˆæœ€å°é™ã«ã™ã‚‹è¨­è¨ˆï¼‰
```
å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:
  1. infrastructure/db/client.ts         â†’ Turso æ¥ç¶šè¨­å®šã‚’è¨˜è¿°
  2. infrastructure/db/schema.ts         â†’ Drizzle ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©
  3. infrastructure/repositories/drizzleAttendanceRepository.ts â†’ å®Ÿè£…ã‚’è¨˜è¿°
  4. infrastructure/getRepository.ts     â†’ inMemory â†’ drizzle ã«åˆ‡ã‚Šæ›¿ãˆ

å¤‰æ›´ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«:
  - domain/ å…¨ä½“                         â†’ å¤‰æ›´ä¸è¦ âœ…
  - application/ å…¨ä½“                    â†’ å¤‰æ›´ä¸è¦ âœ…
  - contracts/ å…¨ä½“                      â†’ å¤‰æ›´ä¸è¦ âœ…
  - presentation/ å…¨ä½“                   â†’ å¤‰æ›´ä¸è¦ âœ…
  - app/routes/api/ å…¨ä½“                 â†’ å¤‰æ›´ä¸è¦ âœ…
```

---

## åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ™ã‚¿æ›¸ãï¼‰

```typescript
// infrastructure/data/attendanceData.ts

import type { AttendanceDay } from "../../domain/entities/attendance";

// éå»ã®å‹¤æ€ å±¥æ­´ï¼ˆåˆæœŸè¡¨ç¤ºç”¨ï¼‰
export const initialHistory: AttendanceDay[] = [
  {
    date: "2026-02-21",
    status: "finished",
    clockIn: new Date("2026-02-21T09:15:00+09:00"),
    clockOut: new Date("2026-02-21T18:30:00+09:00"),
    workMinutes: 555,
  },
  {
    date: "2026-02-20",
    status: "finished",
    clockIn: new Date("2026-02-20T08:50:00+09:00"),
    clockOut: new Date("2026-02-20T17:45:00+09:00"),
    workMinutes: 535,
  },
  {
    date: "2026-02-19",
    status: "finished",
    clockIn: new Date("2026-02-19T09:00:00+09:00"),
    clockOut: new Date("2026-02-19T18:00:00+09:00"),
    workMinutes: 540,
  },
  {
    date: "2026-02-18",
    status: "finished",
    clockIn: new Date("2026-02-18T09:30:00+09:00"),
    clockOut: new Date("2026-02-18T18:15:00+09:00"),
    workMinutes: 525,
  },
  {
    date: "2026-02-17",
    status: "finished",
    clockIn: new Date("2026-02-17T08:45:00+09:00"),
    clockOut: new Date("2026-02-17T17:30:00+09:00"),
    workMinutes: 525,
  },
];

// ä»Šæ—¥ã®å‹¤æ€ ï¼ˆåˆæœŸçŠ¶æ…‹: æœªå‡ºå‹¤ï¼‰
// ã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•ã§ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹
export let todayRecord: AttendanceDay = {
  date: new Date().toISOString().split("T")[0],
  status: "not_started",
  clockIn: null,
  clockOut: null,
  workMinutes: null,
};
```

---

## å‹å®šç¾©

### domain/entities/attendance.ts
```typescript
export type AttendanceStatus = "not_started" | "working" | "finished";

export interface AttendanceDay {
  date: string;              // "2026-02-23" å½¢å¼
  status: AttendanceStatus;
  clockIn: Date | null;
  clockOut: Date | null;
  workMinutes: number | null;
}

export interface WorkDuration {
  hours: number;
  minutes: number;
  totalMinutes: number;
}
```

### domain/ports/attendanceRepository.ts
```typescript
import type { AttendanceDay } from "../entities/attendance";

export interface AttendanceRepository {
  getToday(date: string): Promise<AttendanceDay>;
  save(record: AttendanceDay): Promise<void>;
  getHistory(): Promise<AttendanceDay[]>;
}
```

### domain/ports/clock.ts
```typescript
export interface Clock {
  now(): Date;
  todayString(): string;  // "2026-02-23" å½¢å¼
}
```

---

## UI ã‚¤ãƒ¡ãƒ¼ã‚¸

### ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆæœªå‡ºå‹¤æ™‚ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‡ºå‹¤ç®¡ç†                     â”‚
â”‚                                     â”‚
â”‚  ğŸ• ç¾åœ¨æ™‚åˆ»: 08:55:30             â”‚  â† CurrentTime
â”‚  ğŸ“… 2026å¹´2æœˆ23æ—¥ï¼ˆæœˆï¼‰             â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœªå‡ºå‹¤          â”‚   â”‚  â† StatusCard
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                       â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    ğŸŸ¢ å‡ºå‹¤ã™ã‚‹         â”‚  â”‚   â”‚  â† ClockButton
â”‚  â”‚  â”‚                       â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€ å‹¤æ€ å±¥æ­´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â† HistoryTable
â”‚                                     â”‚
â”‚  æ—¥ä»˜        å‡ºå‹¤    é€€å‹¤    å‹¤å‹™   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  2/21 (é‡‘)  09:15   18:30   9h15m  â”‚
â”‚  2/20 (æœ¨)  08:50   17:45   8h55m  â”‚
â”‚  2/19 (æ°´)  09:00   18:00   9h00m  â”‚
â”‚  2/18 (ç«)  09:30   18:15   8h45m  â”‚
â”‚  2/17 (æœˆ)  08:45   17:30   8h45m  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆå‹¤å‹™ä¸­ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‡ºå‹¤ç®¡ç†                     â”‚
â”‚                                     â”‚
â”‚  ğŸ• ç¾åœ¨æ™‚åˆ»: 14:30:15             â”‚
â”‚  ğŸ“… 2026å¹´2æœˆ23æ—¥ï¼ˆæœˆï¼‰             â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ğŸŸ¢ å‹¤å‹™ä¸­       â”‚   â”‚  â† StatusCardï¼ˆç·‘è‰²èƒŒæ™¯ï¼‰
â”‚  â”‚  å‡ºå‹¤æ™‚åˆ»: 09:00            â”‚   â”‚
â”‚  â”‚  çµŒéæ™‚é–“: 5æ™‚é–“30åˆ†         â”‚   â”‚  â† WorkSummary
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                       â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    ğŸ”´ é€€å‹¤ã™ã‚‹         â”‚  â”‚   â”‚  â† ClockButton
â”‚  â”‚  â”‚                       â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€ å‹¤æ€ å±¥æ­´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ...                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆé€€å‹¤æ¸ˆã¿ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‡ºå‹¤ç®¡ç†                     â”‚
â”‚                                     â”‚
â”‚  ğŸ• ç¾åœ¨æ™‚åˆ»: 18:05:42             â”‚
â”‚  ğŸ“… 2026å¹´2æœˆ23æ—¥ï¼ˆæœˆï¼‰             â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… é€€å‹¤æ¸ˆã¿      â”‚   â”‚  â† StatusCardï¼ˆé’è‰²èƒŒæ™¯ï¼‰
â”‚  â”‚  å‡ºå‹¤æ™‚åˆ»: 09:00            â”‚   â”‚
â”‚  â”‚  é€€å‹¤æ™‚åˆ»: 18:00            â”‚   â”‚
â”‚  â”‚  å‹¤å‹™æ™‚é–“: 9æ™‚é–“00åˆ†         â”‚   â”‚  â† WorkSummary
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚  ï¼ˆæœ¬æ—¥ã®æ‰“åˆ»ã¯å®Œäº†ã—ã¾ã—ãŸï¼‰ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”€â”€ å‹¤æ€ å±¥æ­´ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ...                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚
â”‚  å‡ºå‹¤ã—ã¾ã™ã‹ï¼Ÿ              â”‚
â”‚                             â”‚
â”‚  ç¾åœ¨æ™‚åˆ»: 09:00:15         â”‚
â”‚                             â”‚
â”‚  [ ã‚­ãƒ£ãƒ³ã‚»ãƒ« ]  [ å‡ºå‹¤ã™ã‚‹ ] â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
